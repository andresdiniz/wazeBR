<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configura√ß√µes de Notifica√ß√£o</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --primary-light: #4895ef;
            --secondary: #3f37c9;
            --success: #4cc9f0;
            --warning: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }
        
        body {
            background-color: #f5f7fb;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #333;
        }
        
        .page-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 0 0 20px 20px;
            box-shadow: var(--card-shadow);
            margin-bottom: 2rem;
            padding: 1.5rem 0;
        }
        
        .card {
            border: none;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            overflow: hidden;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        
        .stats-card {
            background: white;
            border-radius: 10px;
            padding: 1.25rem;
            height: 100%;
            transition: var(--transition);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        }
        
        .stats-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        .stats-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .notification-table {
            border-collapse: separate;
            border-spacing: 0;
        }
        
        .notification-table thead {
            background: linear-gradient(to right, var(--primary), var(--primary-light));
            color: white;
        }
        
        .notification-table th {
            padding: 1rem;
            font-weight: 500;
        }
        
        .notification-table td {
            padding: 1rem;
            vertical-align: middle;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .notification-table tr:last-child td {
            border-bottom: none;
        }
        
        .notification-table tr:hover td {
            background-color: rgba(67, 97, 238, 0.03);
        }
        
        .channel-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
        }
        
        .channel-icon.email {
            background-color: rgba(52, 152, 219, 0.15);
            color: #3498db;
        }
        
        .channel-icon.whatsapp {
            background-color: rgba(46, 204, 113, 0.15);
            color: #2ecc71;
        }
        
        .status-badge {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 500;
        }
        
        .status-badge.active {
            background-color: rgba(46, 204, 113, 0.15);
            color: #27ae60;
        }
        
        .status-badge.inactive {
            background-color: rgba(149, 165, 166, 0.15);
            color: #7f8c8d;
        }
        
        .action-btn {
            width: 36px;
            height: 36px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            margin: 0 3px;
            transition: var(--transition);
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
        }
        
        .modal-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 12px 12px 0 0 !important;
            padding: 1.5rem;
        }
        
        .modal-title {
            font-weight: 600;
        }
        
        .alert-category {
            border: 1px solid var(--light-gray);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 1rem;
        }
        
        .alert-category-header {
            background-color: rgba(67, 97, 238, 0.05);
            padding: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .alert-category-body {
            padding: 1rem;
            background-color: rgba(67, 97, 238, 0.02);
        }
        
        .alert-item {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            background: white;
            border-radius: 8px;
            border: 1px solid var(--light-gray);
        }
        
        .alert-item:last-child {
            margin-bottom: 0;
        }
        
        .alert-item:hover {
            background-color: rgba(67, 97, 238, 0.05);
        }
        
        .search-container {
            position: relative;
            margin-bottom: 1.5rem;
        }
        
        .search-container i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }
        
        .search-container input {
            padding-left: 45px;
            border-radius: 50px;
            border: 1px solid var(--light-gray);
            height: 45px;
        }
        
        .empty-state {
            text-align: center;
            padding: 3rem 0;
        }
        
        .empty-state i {
            font-size: 5rem;
            color: #dee2e6;
            margin-bottom: 1.5rem;
        }
        
        .badge-pill {
            border-radius: 20px;
            padding: 0.4em 0.8em;
            font-weight: 500;
        }
        
        .btn-primary {
            background: linear-gradient(to right, var(--primary), var(--primary-light));
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            font-weight: 500;
            transition: var(--transition);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.3);
        }
        
        .btn-outline-primary {
            border-color: var(--primary);
            color: var(--primary);
            border-radius: 10px;
            font-weight: 500;
            transition: var(--transition);
        }
        
        .btn-outline-primary:hover {
            background-color: var(--primary);
            color: white;
        }
        
        .notification-tag {
            background-color: #e3f2fd;
            color: #1976d2;
            border-radius: 4px;
            padding: 2px 8px;
            font-size: 0.85rem;
            font-weight: 500;
            display: inline-block;
        }
        
        @media (max-width: 768px) {
            .stats-card {
                margin-bottom: 1rem;
            }
            
            .table-responsive {
                border-radius: 10px;
                overflow: hidden;
            }
            
            .action-btns {
                display: flex;
                justify-content: center;
                margin-top: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="page-header">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center flex-wrap">
                <div class="mb-3 mb-md-0">
                    <h1 class="mb-1 fw-bold">
                        <i class="fas fa-bell me-2"></i>Configura√ß√µes de Notifica√ß√£o
                    </h1>
                    <p class="mb-0 opacity-75">Gerencie seus canais de notifica√ß√£o e alertas personalizados</p>
                </div>
                <button class="btn btn-light btn-lg shadow-sm fw-medium" data-bs-toggle="modal" data-bs-target="#notificationModal">
                    <i class="fas fa-plus me-2"></i>Nova Notifica√ß√£o
                </button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Stats Cards -->
        <div class="row mb-4 g-4">
            <div class="col-md-6 col-lg-3">
                <div class="stats-card">
                    <div class="d-flex align-items-center">
                        <div class="stats-icon bg-primary bg-opacity-10 text-primary me-3">
                            <i class="fas fa-bell"></i>
                        </div>
                        <div>
                            <div class="fw-bold h4 mb-0">12</div>
                            <small class="text-muted">Total de Configura√ß√µes</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="stats-card">
                    <div class="d-flex align-items-center">
                        <div class="stats-icon bg-success bg-opacity-10 text-success me-3">
                            <i class="fas fa-toggle-on"></i>
                        </div>
                        <div>
                            <div class="fw-bold h4 mb-0">8</div>
                            <small class="text-muted">Ativas</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="stats-card">
                    <div class="d-flex align-items-center">
                        <div class="stats-icon bg-info bg-opacity-10 text-info me-3">
                            <i class="fab fa-whatsapp"></i>
                        </div>
                        <div>
                            <div class="fw-bold h4 mb-0">5</div>
                            <small class="text-muted">WhatsApp</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="stats-card">
                    <div class="d-flex align-items-center">
                        <div class="stats-icon bg-warning bg-opacity-10 text-warning me-3">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div>
                            <div class="fw-bold h4 mb-0">7</div>
                            <small class="text-muted">E-mail</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Card -->
        <div class="card">
            <div class="card-header bg-white py-3">
                <h5 class="card-title mb-0">Minhas Notifica√ß√µes</h5>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table notification-table mb-0">
                        <thead>
                            <tr>
                                <th class="text-center">#</th>
                                <th>Canal</th>
                                <th>Descri√ß√£o</th>
                                <th>Destino</th>
                                <th class="text-center">Status</th>
                                <th class="text-center">A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="text-center">1</td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <div class="channel-icon whatsapp">
                                            <i class="fab fa-whatsapp"></i>
                                        </div>
                                        <span class="fw-medium">WhatsApp</span>
                                    </div>
                                </td>
                                <td>
                                    <span>Alertas de Tr√¢nsito - Centro</span>
                                </td>
                                <td>
                                    <span class="notification-tag">+55 11 98765-4321</span>
                                </td>
                                <td class="text-center">
                                    <span class="status-badge active">
                                        <i class="fas fa-check-circle me-1"></i>Ativo
                                    </span>
                                </td>
                                <td class="text-center action-btns">
                                    <button class="btn btn-sm btn-outline-primary action-btn" title="Editar">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-secondary action-btn" title="Testar">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger action-btn" title="Excluir">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td class="text-center">2</td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <div class="channel-icon email">
                                            <i class="fas fa-envelope"></i>
                                        </div>
                                        <span class="fw-medium">E-mail</span>
                                    </div>
                                </td>
                                <td>
                                    <span>Alertas de Constru√ß√£o</span>
                                </td>
                                <td>
                                    <span class="notification-tag">usuario@exemplo.com</span>
                                </td>
                                <td class="text-center">
                                    <span class="status-badge active">
                                        <i class="fas fa-check-circle me-1"></i>Ativo
                                    </span>
                                </td>
                                <td class="text-center action-btns">
                                    <button class="btn btn-sm btn-outline-primary action-btn" title="Editar">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-secondary action-btn" title="Testar">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger action-btn" title="Excluir">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td class="text-center">3</td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <div class="channel-icon whatsapp">
                                            <i class="fab fa-whatsapp"></i>
                                        </div>
                                        <span class="fw-medium">WhatsApp</span>
                                    </div>
                                </td>
                                <td>
                                    <span>Alertas de Acidentes</span>
                                </td>
                                <td>
                                    <span class="notification-tag">+55 11 91234-5678</span>
                                </td>
                                <td class="text-center">
                                    <span class="status-badge inactive">
                                        <i class="fas fa-pause-circle me-1"></i>Inativo
                                    </span>
                                </td>
                                <td class="text-center action-btns">
                                    <button class="btn btn-sm btn-outline-primary action-btn" title="Editar">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-secondary action-btn" title="Testar">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger action-btn" title="Excluir">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td class="text-center">4</td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <div class="channel-icon email">
                                            <i class="fas fa-envelope"></i>
                                        </div>
                                        <span class="fw-medium">E-mail</span>
                                    </div>
                                </td>
                                <td>
                                    <span>Alertas de Perigo na Via</span>
                                </td>
                                <td>
                                    <span class="notification-tag">gerente@empresa.com</span>
                                </td>
                                <td class="text-center">
                                    <span class="status-badge active">
                                        <i class="fas fa-check-circle me-1"></i>Ativo
                                    </span>
                                </td>
                                <td class="text-center action-btns">
                                    <button class="btn btn-sm btn-outline-primary action-btn" title="Editar">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-secondary action-btn" title="Testar">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger action-btn" title="Excluir">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Modal -->
    <div class="modal fade" id="notificationModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-cog me-2"></i>Configurar Notifica√ß√£o
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="notificationForm">
                        <input type="hidden" name="id" id="notificationId">
                        
                        <div class="mb-4">
                            <h6 class="fw-bold mb-3">
                                <i class="fas fa-sliders-h me-2 text-primary"></i>Configura√ß√µes B√°sicas
                            </h6>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="channel" class="form-label fw-medium">Canal de Notifica√ß√£o</label>
                                    <select class="form-select" name="channel" id="channel" required>
                                        <option value="">Selecione um canal...</option>
                                        <option value="email">üìß E-mail</option>
                                        <option value="whatsapp">üì± WhatsApp</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="destination" class="form-label fw-medium">Destino</label>
                                    <input type="text" class="form-control" name="destination" id="destination" 
                                        placeholder="Ex: email@exemplo.com ou +5511999999999" required>
                                    <div class="form-text">
                                        <small><i class="fas fa-info-circle me-1"></i>Para WhatsApp, inclua o c√≥digo do pa√≠s</small>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <label for="description" class="form-label fw-medium">Descri√ß√£o</label>
                                    <input type="text" class="form-control" name="description" id="description" 
                                        placeholder="Ex: Alertas de Tr√¢nsito - Centro" maxlength="100" required>
                                </div>
                                <div class="col-md-4 d-flex align-items-end">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="status" name="status" checked>
                                        <label class="form-check-label fw-medium" for="status">
                                            <i class="fas fa-power-off me-1"></i>Ativar
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h6 class="fw-bold mb-0">
                                    <i class="fas fa-bell me-2 text-primary"></i>Tipos de Alertas
                                </h6>
                                <div class="d-flex">
                                    <div class="search-container me-2">
                                        <i class="fas fa-search"></i>
                                        <input type="text" class="form-control" placeholder="Pesquisar alertas..." id="alertSearch">
                                    </div>
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-sm btn-outline-primary" id="selectAllAlerts">
                                            <i class="fas fa-check-square me-1"></i>Marcar Todos
                                        </button>
                                        <button type="button" class="btn btn-sm btn-outline-primary" id="deselectAllAlerts">
                                            <i class="fas fa-square me-1"></i>Desmarcar Todos
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="alert-category">
                                <div class="alert-category-header" data-bs-toggle="collapse" href="#accidentsCollapse">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-car-crash text-danger me-3"></i>
                                        <div>
                                            <div class="fw-bold">Acidentes</div>
                                        </div>
                                    </div>
                                    <span class="badge bg-danger bg-opacity-10 text-danger badge-pill">3</span>
                                </div>
                                <div class="collapse show" id="accidentsCollapse">
                                    <div class="alert-category-body">
                                        <div class="alert-item">
                                            <input class="form-check-input me-3" type="checkbox" id="accidentMinor" checked>
                                            <label class="form-check-label fw-medium" for="accidentMinor">Acidente Menor</label>
                                        </div>
                                        <div class="alert-item">
                                            <input class="form-check-input me-3" type="checkbox" id="accidentMajor" checked>
                                            <label class="form-check-label fw-medium" for="accidentMajor">Acidente Grave</label>
                                        </div>
                                        <div class="alert-item">
                                            <input class="form-check-input me-3" type="checkbox" id="accidentGeneral">
                                            <label class="form-check-label fw-medium" for="accidentGeneral">Acidente Geral</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="alert-category">
                                <div class="alert-category-header" data-bs-toggle="collapse" href="#congestionCollapse">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-traffic-light text-warning me-3"></i>
                                        <div>
                                            <div class="fw-bold">Congestionamentos</div>
                                        </div>
                                    </div>
                                    <span class="badge bg-warning bg-opacity-10 text-warning badge-pill">5</span>
                                </div>
                                <div class="collapse show" id="congestionCollapse">
                                    <div class="alert-category-body">
                                        <div class="alert-item">
                                            <input class="form-check-input me-3" type="checkbox" id="trafficModerate" checked>
                                            <label class="form-check-label fw-medium" for="trafficModerate">Tr√°fego Moderado</label>
                                        </div>
                                        <div class="alert-item">
                                            <input class="form-check-input me-3" type="checkbox" id="trafficHeavy" checked>
                                            <label class="form-check-label fw-medium" for="trafficHeavy">Tr√°fego Pesado</label>
                                        </div>
                                        <div class="alert-item">
                                            <input class="form-check-input me-3" type="checkbox" id="trafficStopped">
                                            <label class="form-check-label fw-medium" for="trafficStopped">Tr√°fego Parado</label>
                                        </div>
                                        <div class="alert-item">
                                            <input class="form-check-input me-3" type="checkbox" id="trafficLight">
                                            <label class="form-check-label fw-medium" for="trafficLight">Tr√°fego Leve</label>
                                        </div>
                                        <div class="alert-item">
                                            <input class="form-check-input me-3" type="checkbox" id="congestionGeneral">
                                            <label class="form-check-label fw-medium" for="congestionGeneral">Congestionamento Geral</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="alert-category">
                                <div class="alert-category-header" data-bs-toggle="collapse" href="#hazardsCollapse">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-exclamation-triangle text-danger me-3"></i>
                                        <div>
                                            <div class="fw-bold">Perigos e Hazards</div>
                                        </div>
                                    </div>
                                    <span class="badge bg-danger bg-opacity-10 text-danger badge-pill">10</span>
                                </div>
                                <div class="collapse" id="hazardsCollapse">
                                    <div class="alert-category-body">
                                        <div class="alert-item">
                                            <input class="form-check-input me-3" type="checkbox" id="roadHazard">
                                            <label class="form-check-label fw-medium" for="roadHazard">Perigo na Via</label>
                                        </div>
                                        <div class="alert-item">
                                            <input class="form-check-input me-3" type="checkbox" id="shoulderHazard" checked>
                                            <label class="form-check-label fw-medium" for="shoulderHazard">Perigo no Acostamento</label>
                                        </div>
                                        <div class="alert-item">
                                            <input class="form-check-input me-3" type="checkbox" id="weatherHazard">
                                            <label class="form-check-label fw-medium" for="weatherHazard">Perigo Clim√°tico</label>
                                        </div>
                                        <div class="alert-item">
                                            <input class="form-check-input me-3" type="checkbox" id="objectOnRoad">
                                            <label class="form-check-label fw-medium" for="objectOnRoad">Objeto na Via</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="saveNotification">Salvar Configura√ß√£o</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-danger"><i class="fas fa-exclamation-triangle me-2"></i>Confirmar Exclus√£o</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Tem certeza que deseja excluir esta configura√ß√£o de notifica√ß√£o? Esta a√ß√£o n√£o pode ser desfeita.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" id="confirmDelete">Excluir</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize tooltips
            const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
            const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => {
                return new bootstrap.Tooltip(tooltipTriggerEl, {
                    trigger: 'hover'
                });
            });
            
            // Alert search functionality
            const alertSearch = document.getElementById('alertSearch');
            if (alertSearch) {
                alertSearch.addEventListener('input', function(e) {
                    const searchTerm = e.target.value.toLowerCase();
                    const alertItems = document.querySelectorAll('.alert-item');
                    
                    alertItems.forEach(item => {
                        const label = item.querySelector('.form-check-label').textContent.toLowerCase();
                        if (label.includes(searchTerm)) {
                            item.style.display = 'flex';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                });
            }
            
            // Select/Deselect all alerts
            const selectAllBtn = document.getElementById('selectAllAlerts');
            const deselectAllBtn = document.getElementById('deselectAllAlerts');
            const alertCheckboxes = document.querySelectorAll('.alert-item input[type="checkbox"]');
            
            if (selectAllBtn) {
                selectAllBtn.addEventListener('click', function() {
                    alertCheckboxes.forEach(checkbox => {
                        checkbox.checked = true;
                    });
                    this.classList.add('btn-primary');
                    setTimeout(() => this.classList.remove('btn-primary'), 300);
                });
            }
            
            if (deselectAllBtn) {
                deselectAllBtn.addEventListener('click', function() {
                    alertCheckboxes.forEach(checkbox => {
                        checkbox.checked = false;
                    });
                    this.classList.add('btn-primary');
                    setTimeout(() => this.classList.remove('btn-primary'), 300);
                });
            }
            
            // Modal handling
            const notificationModal = new bootstrap.Modal(document.getElementById('notificationModal'));
            const deleteModal = new bootstrap.Modal(document.getElementById('deleteModal'));
            
            // Edit button handling
            const editButtons = document.querySelectorAll('.action-btn.btn-outline-primary');
            editButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // In a real app, this would load existing data
                    document.getElementById('notificationId').value = this.closest('tr').querySelector('td:first-child').textContent;
                    document.getElementById('channel').value = 'whatsapp';
                    document.getElementById('destination').value = '+55 11 98765-4321';
                    document.getElementById('description').value = 'Alertas de Tr√¢nsito - Centro';
                    document.getElementById('status').checked = true;
                    
                    notificationModal.show();
                });
            });
            
            // Test button handling
            const testButtons = document.querySelectorAll('.action-btn.btn-outline-secondary');
            testButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const row = this.closest('tr');
                    const channel = row.querySelector('td:nth-child(2) .fw-medium').textContent;
                    const destination = row.querySelector('td:nth-child(4) .notification-tag').textContent;
                    
                    alert(`Enviando notifica√ß√£o de teste via ${channel} para ${destination}`);
                    
                    // Visual feedback
                    this.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
                    this.disabled = true;
                    
                    setTimeout(() => {
                        this.innerHTML = '<i class="fas fa-paper-plane"></i>';
                        this.disabled = false;
                        alert('Notifica√ß√£o de teste enviada com sucesso!');
                    }, 1500);
                });
            });
            
            // Delete button handling
            const deleteButtons = document.querySelectorAll('.action-btn.btn-outline-danger');
            deleteButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const row = this.closest('tr');
                    const notificationId = row.querySelector('td:first-child').textContent;
                    
                    document.getElementById('confirmDelete').onclick = function() {
                        // In a real app, this would make an API call to delete
                        row.style.opacity = '0.5';
                        row.style.backgroundColor = '#ffebee';
                        
                        setTimeout(() => {
                            row.remove();
                            alert(`Notifica√ß√£o #${notificationId} exclu√≠da com sucesso!`);
                        }, 500);
                        
                        deleteModal.hide();
                    };
                    
                    deleteModal.show();
                });
            });
            
            // Save notification
            const saveBtn = document.getElementById('saveNotification');
            if (saveBtn) {
                saveBtn.addEventListener('click', function() {
                    const form = document.getElementById('notificationForm');
                    const formData = new FormData(form);
                    
                    // Basic validation
                    if (!formData.get('channel')) {
                        alert('Por favor, selecione um canal de notifica√ß√£o.');
                        return;
                    }
                    
                    if (!formData.get('destination')) {
                        alert('Por favor, informe o destino da notifica√ß√£o.');
                        return;
                    }
                    
                    // Show loading state
                    this.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Salvando...';
                    this.disabled = true;
                    
                    // Simulate API call
                    setTimeout(() => {
                        // Reset button
                        this.innerHTML = '<i class="fas fa-save me-2"></i>Salvar Configura√ß√£o';
                        this.disabled = false;
                        
                        // Close modal
                        notificationModal.hide();
                        
                        // Show success message
                        alert('Configura√ß√£o de notifica√ß√£o salva com sucesso!');
                    }, 1500);
                });
            }
        });
    </script>
</body>
</html>