{# container.twig #}

<div class="container-fluid">
    <!-- Título da Página -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0 text-gray-800">Configurações do Sistema</h1>
    </div>

    <!-- Configurações Gerais -->
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">Configurações Gerais</h6>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-bordered" id="settingsTable" width="100%" cellspacing="0">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nome Sistema</th>
                            <th>Logo</th>
                            <th>Manutenção</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for setting in settingsdata %}
                        <tr>
                            <td>{{ setting.id }}</td>
                            <td>{{ setting.systemname }}</td>
                            <td>{{ setting.logo }}</td>
                            <td>{{ setting.manutencao ? 'Ativo' : 'Inativo' }}</td>
                            <td>
                                <button class="btn btn-primary btn-edit-setting" 
                                    data-id="{{ setting.id }}"
                                    data-systemname="{{ setting.systemname }}"
                                    data-logo="{{ setting.logo }}"
                                    data-manutencao="{{ setting.manutencao }}">
                                    <i class="fas fa-edit"></i>
                                </button>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Páginas do Site -->
    <div class="card shadow mb-4">
        <div class="card-header py-3 d-flex justify-content-between align-items-center">
            <h6 class="m-0 font-weight-bold text-primary">Páginas do Site</h6>
            <button class="btn btn-success" id="btn-create-page"><i class="fas fa-plus"></i> Criar Nova Página</button>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-bordered" id="pagesTable" width="100%" cellspacing="0">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Título</th>
                            <th>URL</th>
                            <th>Descrição</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for page in pagesdata.pageData %}
                        <tr>
                            <td>{{ page.id }}</td>
                            <td>{{ page.title }}</td>
                            <td>{{ page.url }}</td>
                            <td>{{ page.descripton }}</td>
                            <td>
                                <button class="btn btn-primary btn-edit-page" 
                                    data-id="{{ page.id }}"
                                    data-title="{{ page.title }}"
                                    data-url="{{ page.url }}"
                                    data-descripton="{{ page.descripton }}">
                                    <i class="fas fa-edit"></i>
                                </button>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script>
$(document).ready(function() {
    // Configurações - Abrir Modal
    $('.btn-edit-setting').click(function() {
        var $btn = $(this);
        $('#setting_id').val($btn.data('id'));
        $('#systemname').val($btn.data('systemname'));
        $('#logo').val($btn.data('logo'));
        $('#manutencao').prop('checked', $btn.data('manutencao') == 1);
        $('#settingsModal').modal('show');
    });

    // Páginas - Abrir Modal
    $('.btn-edit-page').click(function() {
        var $btn = $(this);
        $('#page_id').val($btn.data('id'));
        $('#title').val($btn.data('title'));
        $('#url').val($btn.data('url'));
        $('#descripton').val($btn.data('descripton'));
        $('#pagesModal').modal('show');
    });

    // Criar Nova Página - Abrir Modal Limpo
    $('#btn-create-page').click(function() {
        $('#page_id').val('');
        $('#title').val('');
        $('#url').val('');
        $('#descripton').val('');
        $('#pagesModal').modal('show');
    });

    // Fechar Modais no X e no Cancelar
    $('.btn-close, [data-dismiss="modal"]').click(function() {
        $('.modal').modal('hide');
    });
});
</script>