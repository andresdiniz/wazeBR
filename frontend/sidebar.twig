<body id="page-top">

<!-- Wrapper Principal -->
<div id="wrapper">

    <!-- Sidebar -->
    <ul class="navbar-nav sidebar" id="accordionSidebar">

        <!-- Brand / Logo -->
        <a class="sidebar-brand" href="/home">
            <div class="sidebar-brand-icon">
                <img src="{{ settings.logo }}" alt="{{ settings.systemname }}">
            </div>
            <div class="sidebar-brand-text">{{ settings.systemname }}</div>
        </a>

        <!-- Divider -->
        <hr class="sidebar-divider my-0">

        <!-- Nav Item - Dashboard -->
        <li class="nav-item {{ pagedata.current_page == 'dashboard' ? 'active' : '' }}">
            <a class="nav-link" href="dashboard" data-tooltip="Dashboard">
                <i class="fas fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </a>
        </li>

        <!-- Divider -->
        <hr class="sidebar-divider">

        <!-- Heading -->
        <div class="sidebar-heading">
            <i class="fas fa-broadcast-tower"></i>
            Dados ao Vivo
        </div>

        <li class="nav-item {{ pagedata.current_page in ['routes', 'irregularidades'] ? 'active' : '' }}">
            <a class="nav-link" href="#" 
            data-bs-toggle="collapse" 
            data-bs-target="#collapseLiveRoutes"
            data-tooltip="Rotas"
            aria-expanded="{{ pagedata.current_page in ['routes', 'irregularidades'] ? 'true' : 'false' }}">
                <i class="fas fa-route"></i>
                <span>Rotas</span>
            </a>

            <div id="collapseLiveRoutes" 
                class="collapse {{ pagedata.current_page in ['routes', 'irregularidades'] ? 'show' : '' }}">
                <div class="collapse-inner">
                    <h6 class="collapse-header">
                        <i class="fas fa-road"></i>
                        Opções de Rotas
                    </h6>

                    <a class="collapse-item {{ pagedata.current_page == 'routes' ? 'active' : '' }}" href="routes">
                        <i class="fas fa-list"></i> Todas as Rotas
                    </a>

                    <a class="collapse-item {{ pagedata.current_page == 'irregularidades' ? 'active' : '' }}" href="irregularidades">
                        <i class="fas fa-exclamation-triangle"></i> Irregularidades
                    </a>
                </div>
            </div>
        </li>

        <hr class="sidebar-divider">

        <div class="sidebar-heading">
            <i class="fa-regular fa-chart-bar"></i>
            Dados Estatísticos
        </div>

        <li class="nav-item {{ pagedata.current_page in ['analise_tempos', 'irregularidades_stats'] ? 'active' : '' }}">
            <a class="nav-link" href="#"
            data-bs-toggle="collapse"
            data-bs-target="#collapseStatsRoutes"
            data-tooltip="Dados das Rotas"
            aria-expanded="{{ pagedata.current_page in ['analise_tempos', 'irregularidades_stats'] ? 'true' : 'false' }}">
                <i class="fas fa-route"></i>
                <span>Dados das Rotas</span>
            </a>

            <div id="collapseStatsRoutes"
                class="collapse {{ pagedata.current_page in ['analise_tempos', 'irregularidades_stats'] ? 'show' : '' }}">
                <div class="collapse-inner">
                    <h6 class="collapse-header">
                        <i class="fas fa-road"></i>
                        Dados de Rotas
                    </h6>

                    <a class="collapse-item {{ pagedata.current_page == 'analise_tempos' ? 'active' : '' }}" href="routes">
                        <i class="fas fa-list"></i> Análise de Tempos/Velocidades
                    </a>

                    <a class="collapse-item {{ pagedata.current_page == 'irregularidades_stats' ? 'active' : '' }}" href="irregularidades">
                        <i class="fas fa-exclamation-triangle"></i> Irregularidades
                    </a>
                </div>
            </div>
        </li>

        <li class="nav-item {{ pagedata.current_page in ['historic_acidents', 'historic_buracos'] ? 'active' : '' }}">
            <a class="nav-link" href="#"
            data-bs-toggle="collapse"
            data-bs-target="#collapseStatsAlerts"
            data-tooltip="Dados dos Alertas"
            aria-expanded="{{ pagedata.current_page in ['historic_acidents', 'historic_buracos'] ? 'true' : 'false' }}">
                <i class="fas fa-exclamation-circle"></i>
                <span>Dados dos Alertas</span>
            </a>

            <div id="collapseStatsAlerts"
                class="collapse {{ pagedata.current_page in ['historic_acidents', 'historic_buracos'] ? 'show' : '' }}">
                <div class="collapse-inner">
                    <h6 class="collapse-header">
                        <i class="fas fa-bell"></i>
                        Dados de Alertas
                    </h6>

                    <a class="collapse-item {{ pagedata.current_page == 'historic_acidents' ? 'active' : '' }}" href="historic_acidents">
                        <i class="fas fa-car-crash"></i> Acidentes Históricos
                    </a>

                    <a class="collapse-item {{ pagedata.current_page == 'historic_buracos' ? 'active' : '' }}" href="historic_buracos">
                        <i class="fas fa-road"></i> Buracos Históricos
                    </a>
                </div>
            </div>
        </li>

        <!-- Divisor visual do menu -->
        <hr class="sidebar-divider">

        <!-- Título da seção de configurações -->
        <div class="sidebar-heading">
            <i class="fas fa-cog"></i>
            Configurações
        </div>

        <!-- ITEM: Configurações do Sistema -->
        <li class="nav-item {{ pagedata.current_page in ['settings_gerais', 'settings_irregularidades'] ? 'active' : '' }}">
            <!-- Botão que abre/fecha o collapse -->
            <a class="nav-link" href="#"
            data-bs-toggle="collapse"
            data-bs-target="#collapseSystemSettings"
            data-tooltip="Configurações do Sistema"
            aria-expanded="{{ pagedata.current_page in ['settings_gerais', 'settings_irregularidades'] ? 'true' : 'false' }}">
                <i class="fas fa-wrench"></i>
                <span>Configurações do Sistema</span>
            </a>

            <!-- CONTAINER do collapse -->
            <div id="collapseSystemSettings"
                class="collapse {{ pagedata.current_page in ['settings_gerais', 'settings_irregularidades'] ? 'show' : '' }}">
                <div class="collapse-inner">

                    <!-- Cabeçalho interno do collapse -->
                    <h6 class="collapse-header">
                        <i class="fas fa-tools"></i>
                        Opções do Sistema
                    </h6>

                    <!-- Link: Configurações Gerais -->
                    <a class="collapse-item {{ pagedata.current_page == 'settings_gerais' ? 'active' : '' }}" href="settings">
                        <i class="fas fa-palette"></i> Configurações Gerais
                    </a>

                    <!-- Link: Gerenciar Irregularidades -->
                    <a class="collapse-item {{ pagedata.current_page == 'settings_irregularidades' ? 'active' : '' }}" href="irregularidades">
                        <i class="fas fa-exclamation-triangle"></i> Gerenciar Irregularidades
                    </a>

                </div>
            </div>
        </li>

        <!-- ITEM: Utilitários -->
        <li class="nav-item">
            <!-- Botão que abre/fecha o collapse -->
            <a class="nav-link" href="#"
            data-bs-toggle="collapse"
            data-bs-target="#collapseUtilities"
            data-tooltip="Utilitários">
                <i class="fas fa-tools"></i>
                <span>Utilitários</span>
            </a>

            <!-- CONTAINER do collapse -->
            <div id="collapseUtilities" class="collapse">
                <div class="collapse-inner">

                    <!-- Cabeçalho interno -->
                    <h6 class="collapse-header">
                        <i class="fas fa-wrench"></i>
                        Opções do Sistema
                    </h6>

                    <!-- Link: Configurações de Cores -->
                    <a class="collapse-item" href="utilities-color.html">
                        <i class="fas fa-palette"></i> Configurações de Cores
                    </a>

                    <!-- Link: Bordas -->
                    <a class="collapse-item" href="utilities-border.html">
                        <i class="fas fa-border-style"></i> Bordas
                    </a>

                </div>
            </div>
        </li>

        
        <!-- Divider -->
        <hr class="sidebar-divider d-none d-md-block">

        <!-- Sidebar Toggle -->
        <div class="sidebar-toggle-wrapper d-none d-md-block">
            <button id="sidebarToggle"></button>
        </div>

    </ul>
    <!-- End of Sidebar -->

    <!-- Overlay para mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Content Wrapper -->
    <div id="content-wrapper">

        <!-- Main Content -->
        <div id="content">

            <!-- Topbar -->
            <nav class="topbar">

                <!-- Sidebar Toggle (Mobile) -->
                <button id="sidebarToggleTop" class="d-md-none">
                    <i class="fas fa-bars"></i>
                </button>

                <!-- Topbar Info -->
                <div class="topbar-info d-none d-sm-flex ms-3">
                    <i class="fas fa-clock"></i>
                    <span id="currentDateTime"></span>
                </div>
                
                <!-- Topbar Navbar -->
                <ul class="navbar-nav ms-auto">

                    <!-- Notifications -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="alertsDropdown" 
                        data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-bell fa-fw"></i>
                            <span class="badge rounded-pill bg-danger notification-badge">
                                3+
                            </span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end shadow animated--grow-in" aria-labelledby="alertsDropdown">
                            <h6 class="dropdown-header">
                                <i class="fas fa-bell me-2"></i>
                                Centro de Notificações
                            </h6>
                            <a class="dropdown-item d-flex align-items-center" href="#">
                                <div class="me-3">
                                    <div class="icon-circle bg-primary">
                                        <i class="fas fa-file-alt text-white"></i>
                                    </div>
                                </div>
                                <div>
                                    <div class="small text-muted">12 de Dezembro, 2024</div>
                                    <span class="fw-bold">Novo relatório disponível</span>
                                </div>
                            </a>
                            <a class="dropdown-item d-flex align-items-center" href="#">
                                <div class="me-3">
                                    <div class="icon-circle bg-success">
                                        <i class="fas fa-donate text-white"></i>
                                    </div>
                                </div>
                                <div>
                                    <div class="small text-muted">11 de Dezembro, 2024</div>
                                    <span class="fw-bold">Sistema atualizado com sucesso</span>
                                </div>
                            </a>
                            <a class="dropdown-item d-flex align-items-center" href="#">
                                <div class="me-3">
                                    <div class="icon-circle bg-warning">
                                        <i class="fas fa-exclamation-triangle text-white"></i>
                                    </div>
                                </div>
                                <div>
                                    <div class="small text-muted">10 de Dezembro, 2024</div>
                                    <span class="fw-bold">Alerta: Pico de congestionamentos</span>
                                </div>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item text-center text-primary" href="#">
                                <strong>Ver Todas as Notificações</strong>
                            </a>
                        </div>
                    </li>

                    <div class="topbar-divider d-none d-sm-block"></div>

                    <!-- User Menu -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle user-link" href="#" id="userDropdown" 
                        data-bs-toggle="dropdown" aria-expanded="false">
                            <span class="me-2 d-none d-lg-inline user-name">{{user.nome}}</span>
                            <div class="user-avatar">
                                <img src="{{ user.photo }}" alt="Foto do Usuário">
                            </div>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                            <a class="dropdown-item" href="#">
                                <i class="fas fa-user me-2"></i>
                                Perfil
                            </a>
                            <a class="dropdown-item" href="#">
                                <i class="fas fa-cogs me-2"></i>
                                Configurações
                            </a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#logoutModal">
                                <i class="fas fa-sign-out-alt me-2"></i>
                                Sair
                            </a>
                        </div>
                    </li>

                </ul>

            </nav>
            <!-- End of Topbar -->