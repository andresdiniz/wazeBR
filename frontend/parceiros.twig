    <style>
        .modal-header {
            background-color: #007bff;
            color: white;
        }
        .modal-footer {
            justify-content: flex-start;
        }
        .btn-close {
            background-color: transparent;
            border: none;
            font-size: 1.5rem;
        }
    </style>
</head>
<body>
    <div class="container mt-4 mb-4">
        <div class="row">
            <div class="col-lg-6 mb-3">
                <h3 class="text-primary">Gerenciamento de URLs</h3>
            </div>
            <div class="col-lg-6 mb-3 text-right">
                <button class="btn btn-success" data-toggle="modal" data-target="#createModal">Adicionar URL</button>
            </div>
        </div>
        
        <!-- Tabela de URLs de Tráfego -->
        <div class="row">
            <div class="col-lg-12">
                <div class="card shadow-sm p-4">
                    <h4>URLs de Tráfego</h4>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>ID Parceiro</th>
                                <th>URL</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for url in urls_traffic %}
                            <tr>
                                <td>{{ url.id }}</td>
                                <td>{{ url.id_parceiro }}</td>
                                <td>{{ url.url }}</td>
                                <td>
                                    <button class="btn btn-primary btn-sm" data-toggle="modal" data-target="#editModal" data-id="{{ url.id }}" data-id_parceiro="{{ url.id_parceiro }}" data-url="{{ url.url }}">Editar</button>
                                    <button class="btn btn-danger btn-sm" data-id="{{ url.id }}" onclick="deleteUrl({{ url.id }})">Excluir</button>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Tabela de URLs de Alertas -->
        <div class="row mt-4">
            <div class="col-lg-12">
                <div class="card shadow-sm p-4">
                    <h4>URLs de Alertas</h4>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>ID Parceiro</th>
                                <th>URL</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for url in urls_alerts %}
                            <tr>
                                <td>{{ url.id }}</td>
                                <td>{{ url.id_parceiro }}</td>
                                <td>{{ url.url }}</td>
                                <td>
                                    <button class="btn btn-primary btn-sm" data-toggle="modal" data-target="#editModal" data-id="{{ url.id }}" data-id_parceiro="{{ url.id_parceiro }}" data-url="{{ url.url }}">Editar</button>
                                    <button class="btn btn-danger btn-sm" data-id="{{ url.id }}" onclick="deleteUrl({{ url.id }})">Excluir</button>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Tabela de URLs de Eventos -->
        <div class="row mt-4">
            <div class="col-lg-12">
                <div class="card shadow-sm p-4">
                    <h4>URLs de Eventos</h4>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>ID Parceiro</th>
                                <th>URL</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for url in urls_events %}
                            <tr>
                                <td>{{ url.id }}</td>
                                <td>{{ url.id_parceiro }}</td>
                                <td>{{ url.url }}</td>
                                <td>
                                    <button class="btn btn-primary btn-sm" data-toggle="modal" data-target="#editModal" data-id="{{ url.id }}" data-id_parceiro="{{ url.id_parceiro }}" data-url="{{ url.url }}">Editar</button>
                                    <button class="btn btn-danger btn-sm" data-id="{{ url.id }}" onclick="deleteUrl({{ url.id }})">Excluir</button>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Modal de Criação -->
<!-- Modal de Criação -->
<div class="modal fade" id="createModal" tabindex="-1" aria-labelledby="createModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createModalLabel">Adicionar URL</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
            </div>
            <div class="modal-body">
                <form id="createForm">
                    <div class="mb-3">
                        <label for="createIdParceiro" class="form-label">Parceiro</label>
                        <select class="form-control" id="createIdParceiro" name="id_parceiro" required>
                            {% for parceiro in parceiros %}
                            <option value="{{ parceiro.id }}">{{ parceiro.Nome }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="createNomeTabela" class="form-label">Nome da Tabela</label>
                        <select class="form-control" id="createNomeTabela" name="nome_tabela" required>
                            <option value="urls_traffic">URLs de Tráfego</option>
                            <option value="urls_alerts">URLs de Alertas</option>
                            <option value="urls_events">URLs de Eventos</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="createUrl" class="form-label">URL</label>
                        <input type="url" class="form-control" id="createUrl" name="url" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="submit" class="btn btn-success" form="createForm">Salvar</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal de Edição -->
<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editModalLabel">Editar URL</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
            </div>
            <div class="modal-body">
                <form id="editForm">
                    <input type="hidden" id="editId" name="id">
                    
                    <div class="mb-3">
                        <label for="editIdParceiro" class="form-label">ID Parceiro</label>
                        <input type="text" class="form-control" id="editIdParceiro" name="id_parceiro" required>
                    </div>
                    
                    <div class="mb-3">
                        <label for="editUrl" class="form-label">URL</label>
                        <input type="url" class="form-control" id="editUrl" name="url" required aria-describedby="urlHelp">
                        <small id="urlHelp" class="form-text text-muted">Insira um URL válido.</small>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="submit" class="btn btn-primary" form="editForm">Salvar</button>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap e JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var editModal = document.getElementById("editModal");

        editModal.addEventListener("show.bs.modal", function (event) {
            var button = event.relatedTarget; // Botão que acionou o modal
            if (!button) return; // Caso não tenha botão, evita erro
            
            var id = button.getAttribute("data-id");
            var id_parceiro = button.getAttribute("data-id_parceiro");
            var url = button.getAttribute("data-url");

            document.getElementById("editId").value = id;
            document.getElementById("editIdParceiro").value = id_parceiro;
            document.getElementById("editUrl").value = url;
        });

        // Função para excluir URL
        window.deleteUrl = function (id) {
            if (confirm("Tem certeza que deseja excluir esta URL?")) {
                console.log("URL excluída: " + id);
            }
        };

        // Fechar modal ao salvar
        document.getElementById("createForm").addEventListener("submit", function (event) {
            event.preventDefault();
            console.log("Nova URL criada");
            var modal = bootstrap.Modal.getInstance(document.getElementById("createModal"));
            modal.hide();
        });

        document.getElementById("editForm").addEventListener("submit", function (event) {
            event.preventDefault();
            console.log("URL editada");
            var modal = bootstrap.Modal.getInstance(document.getElementById("editModal"));
            modal.hide();
        });
    });
</script>
